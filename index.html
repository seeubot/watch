<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Satellite Map with Custom UI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    body { font-family:"Segoe UI",Arial,sans-serif;background:#121212;color:#fff;}
    #map { position: fixed; top: 0; left: 0; width: 100%; height: 100%; }
    .leaflet-control-zoom { display: none !important; } /* Hide zoom controls */
    #location-box {
      position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
      background: rgba(0,20,40,0.94); padding: 12px 24px; border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.4); z-index:1001; font-size:1rem;
      min-width: 200px; text-align: center;
      transition: background 0.2s;
    }
    .pulse {
      display: inline-block; width: 12px; height: 12px; border-radius: 50%;
      background: #4fc3f7; margin-right: 9px; vertical-align: middle;
      animation: pulse 1.2s infinite;
    }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 #4fc3f799; }
      70% { box-shadow: 0 0 0 10px #4fc3f700; }
      100% { box-shadow: 0 0 0 0 #4fc3f799; }
    }
    .gps-btn {
      position: fixed; right: 28px; bottom: 28px; z-index: 1001;
      background: #212121; color: #4fc3f7; border: none; border-radius: 50%;
      width: 56px; height: 56px; font-size: 27px;
      box-shadow: 0 3px 8px #0006; cursor: pointer;
      transition: background 0.2s;
      display: flex; align-items: center; justify-content: center;
      padding: 0;
    }
    .gps-btn:focus, .gps-btn:hover { background: #2b2b3b; }
    .gps-btn svg { display: block; }
    @media (max-width: 600px) {
      #location-box { top: 8px; padding: 8px 4px; font-size: 0.96rem; }
      .gps-btn { bottom: 14px; right: 14px; width: 48px; height: 48px; font-size: 22px; }
    }
    /* Hide footer if present */
    footer { display: none !important; }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="location-box">
    <span class="pulse"></span>
    Searching location...
  </div>
  <button class="gps-btn" onclick="centerMap()">
    <!-- Modern location SVG icon -->
    <svg width="28" height="28" viewBox="0 0 24 24" fill="#4fc3f7"><path d="M12 2L15 21L12 19L9 21L12 2Z"/></svg>
  </button>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    let map, marker, lastPos, following = true;
    const locationBox = document.getElementById('location-box');
    // Initialize the map without zoom control
    map = L.map('map', { zoomControl: false }).setView([20,0], 2);
    L.tileLayer(
      'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
      { attribution: 'Tiles &copy; Esri, Source: Esri, Maxar, Earthstar Geographics' }
    ).addTo(map);
    function updateAddress(lat, lng) {
      locationBox.innerHTML = '<span class="pulse"></span> Resolving address...';
      fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
      .then(r => r.json())
      .then(d => {
        const myAddr = d.display_name ? d.display_name : `Lat: ${lat.toFixed(4)}, Lng: ${lng.toFixed(4)}`;
        locationBox.innerHTML = `<span class="pulse"></span> ${myAddr}`;
      })
      .catch(() => {
        locationBox.innerHTML = `<span class="pulse"></span> Unable to get address`;
      });
    }
    function onLocationUpdate(pos) {
      const {latitude: lat, longitude: lng} = pos.coords;
      lastPos = [lat, lng];
      if (!marker) {
        marker = L.circleMarker([lat, lng], {
          color: "#4fc3f7", radius:12, fillOpacity:0.7, weight: 4
        }).addTo(map);
      } else {
        marker.setLatLng([lat, lng]);
      }
      if (following) {
        map.setView([lat, lng], Math.max(map.getZoom(),16));
      }
      updateAddress(lat, lng);
      marker.bindTooltip("You are here").openTooltip();
    }
    function onLocationError(e) {
      locationBox.innerHTML = `<span class="pulse"></span> Unable to detect GPS<br>${e.message}`;
    }
    if ("geolocation" in navigator) {
      navigator.geolocation.watchPosition(
        onLocationUpdate, onLocationError,
        { enableHighAccuracy:true, maximumAge:0, timeout:12000 }
      );
    } else {
      locationBox.innerHTML = `<span class="pulse"></span> Geolocation not supported.`;
    }
    function centerMap() {
      following = true;
      if (lastPos) map.setView(lastPos, 17, { animate: true });
    }
    map.on("mousedown touchstart", function() { following = false; });
  </script>
</body>
</html>
