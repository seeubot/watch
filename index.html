<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Video Player with Audio Track Selection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Overlay styling for the selector menu */
        #audioTrackModal {
            display: none;
            position: fixed;
            z-index: 2000;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.5);
            align-items: center; justify-content: center;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen p-4">

<div class="w-full max-w-4xl bg-gray-800 rounded-2xl shadow-2xl overflow-hidden p-6 space-y-6">
    <header class="text-center">
        <h1 class="text-4xl font-extrabold text-blue-400">Web Video Player</h1>
        <p class="mt-2 text-lg text-gray-400">Streaming content directly from the URL</p>
    </header>

    <!-- Video & Audio -->
    <div class="relative w-full pb-[56.25%] rounded-xl overflow-hidden">
        <video id="myVideoPlayer"
               controls
               autoplay
               playsinline
               class="absolute top-0 left-0 w-full h-full object-cover rounded-xl">
            <source src="https://xenophobic-hali-school1660440-2ed04e4c.koyeb.app/dl/689740fb0dc4ac1ee4952470" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <!-- External audio, hidden from view -->
        <audio id="myAudioTrack"></audio>
    </div>

    <!-- Track selector button -->
    <div class="text-center mt-4">
        <button onclick="showAudioTrackModal()"
            class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-white font-bold">
            Select Audio Track
        </button>
    </div>

    <div class="text-center text-gray-400 mt-4">
        <p>If the video does not play, it may be due to a network error, an unsupported format, or a server issue with the provided URL.</p>
    </div>
</div>

<!-- Audio Track Selection Modal -->
<div id="audioTrackModal" class="flex">
    <div class="bg-gray-700 rounded-xl p-6 w-80 mx-auto my-auto space-y-4">
        <h2 class="text-xl font-bold text-white mb-2">Select Audio Track</h2>
        <form id="audioSelectionForm" class="space-y-2">
            <label class="flex items-center space-x-2">
                <input type="radio" name="audioTrack" value="auto" checked>
                <span>Auto (Default video audio)</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="audioTrack" value="tamil">
                <span>Tamil, Stereo</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="audioTrack" value="telugu">
                <span>Telugu, Stereo</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="audioTrack" value="hindi">
                <span>Hindi, Stereo</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="audioTrack" value="english">
                <span>English, Stereo</span>
            </label>
        </form>
        <div class="flex justify-end space-x-2">
            <button onclick="hideAudioTrackModal()" class="bg-gray-500 hover:bg-gray-600 px-4 py-2 rounded text-white">Cancel</button>
            <button onclick="changeAudioTrack()" class="bg-blue-500 hover:bg-blue-600 px-4 py-2 rounded text-white">OK</button>
        </div>
    </div>
</div>

<script>
    // Provide actual audio URLs here
    const audioURLs = {
        tamil:   "https://your-tamil-audio-url.m4a",
        telugu:  "https://your-telugu-audio-url.m4a",
        hindi:   "https://your-hindi-audio-url.m4a",
        english: "https://your-english-audio-url.m4a"
    };

    const video = document.getElementById('myVideoPlayer');
    const audio = document.getElementById('myAudioTrack');
    let currentTrack = "auto";

    // Modal logic
    function showAudioTrackModal() {
        document.getElementById("audioTrackModal").style.display = "flex";
    }
    function hideAudioTrackModal() {
        document.getElementById("audioTrackModal").style.display = "none";
    }

    // Audio track change logic
    function changeAudioTrack() {
        const selection = document.querySelector('input[name="audioTrack"]:checked').value;
        hideAudioTrackModal();
        currentTrack = selection;

        if (selection === "auto") {
            // Use the video's default audio
            audio.pause();
            audio.src = "";
            audio.currentTime = 0;
            video.muted = false;
        } else {
            video.muted = true;
            audio.src = audioURLs[selection] || "";
            audio.currentTime = video.currentTime;
            audio.play();
        }
    }

    // Sync audio with video pause/play/seeking
    video.addEventListener('play', () => {
        if (currentTrack !== "auto") audio.play();
    });
    video.addEventListener('pause', () => {
        if (currentTrack !== "auto") audio.pause();
    });
    video.addEventListener('seeked', () => {
        if (currentTrack !== "auto") audio.currentTime = video.currentTime;
    });
    video.addEventListener('timeupdate', () => {
        if (currentTrack !== "auto") {
            // Sync audio to video (best-effort)
            if (Math.abs(video.currentTime - audio.currentTime) > 0.3) {
                audio.currentTime = video.currentTime;
            }
        }
    });

    // Prevent double playback on initial load
    video.addEventListener('loadedmetadata', () => { audio.currentTime = video.currentTime; });

</script>

</body>
</html>
